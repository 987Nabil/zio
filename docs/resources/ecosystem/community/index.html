<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Community ZIO Libraries · ZIO</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In this section we are going to introduce some of the most important libraries that have first-class ZIO support from the community."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Community ZIO Libraries · ZIO"/><meta property="og:type" content="website"/><meta property="og:url" content="https://zio.dev/"/><meta property="og:description" content="In this section we are going to introduce some of the most important libraries that have first-class ZIO support from the community."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"cornerOffset":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/navbar_brand.png" alt="ZIO"/><h2 class="headerTitleWithLogo">ZIO</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/overview/overview_index" target="_self">Overview</a></li><li class=""><a href="/docs/datatypes/" target="_self">Data Types</a></li><li class=""><a href="/docs/services/" target="_self">Services</a></li><li class=""><a href="/docs/usecases/usecases_index" target="_self">Use Cases</a></li><li class=""><a href="/docs/howto/" target="_self">How to</a></li><li class="siteNavGroupActive"><a href="/docs/resources/" target="_self">Resources</a></li><li class=""><a href="/docs/about/about_index" target="_self">About</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Ecosystem</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/resources/">Summary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Learning<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/resources/learning/articles">Articles</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/learning/videos">Videos</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/learning/cookbooks">Cookbooks</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/learning/cheatsheets">Cheat Sheets</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/learning/sampleprojects">Sample Projects</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/learning/poweredbyzio">Projects using ZIO</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Ecosystem<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/resources/ecosystem/officials">Official ZIO Libraries</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/resources/ecosystem/community">Community ZIO Libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/ecosystem/compatible">ZIO Compatible Libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/ecosystem/tools">Tools for ZIO</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/ecosystem/templates">Project Templates</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/zio/zio/edit/master/docs/resources/ecosystem/community.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Community ZIO Libraries</h1></header><article><div><span><p>In this section we are going to introduce some of the most important libraries that have first-class ZIO support from the community.</p>
<p>If you know a useful library that has first-class ZIO support, please consider <a href="https://github.com/zio/zio/pulls">submitting a pull request</a> to add it to this list.</p>
<h2><a class="anchor" aria-hidden="true" id="caliban"></a><a href="#caliban" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caliban</h2>
<p><a href="https://ghostdogpr.github.io/caliban/">Caliban</a> is a purely functional library for creating GraphQL servers and clients in Scala.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Key features of Caliban</p>
<ul>
<li><strong>Purely Functional</strong> — All interfaces are pure and types are referentially transparent.</li>
<li><strong>Type Safety</strong> — Schemas are type safe and derived at compile time.</li>
<li><strong>Minimal Boilerplate</strong> — No need to manually define a schema for every type in your API.</li>
<li><strong>Excellent Interoperability</strong> — Out-of-the-box support for major HTTP server libraries, effect types, JSON libraries, and more.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation"></a><a href="#installation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban"</span> % <span class="hljs-string">"1.1.0"</span>
</code></pre>
<p>Caliban also have lots of optional modules to inter-operate with other various libraries:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-http4s"</span>     % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// routes for http4s</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-akka-http"</span>  % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// routes for akka-http</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-play"</span>       % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// routes for play</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-finch"</span>      % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// routes for finch</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-zio-http"</span>   % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// routes for zio-http</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-cats"</span>       % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// interop with cats effect</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-monix"</span>      % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// interop with monix</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-tapir"</span>      % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// interop with tapir</span>
libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban-federation"</span> % <span class="hljs-string">"1.1.0"</span> <span class="hljs-comment">// interop with apollo federation</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>First, to define Caliban API, we should define data models using case classes and ADTs. Then the Caliban can derive the whole GraphQL schema from these data models:</p>
<pre><code class="hljs css language-scala modc:silent:nest"><span class="hljs-keyword">import</span> caliban.<span class="hljs-type">GraphQL</span>.graphQL
<span class="hljs-keyword">import</span> caliban.schema.<span class="hljs-type">Annotations</span>.<span class="hljs-type">GQLDescription</span>
<span class="hljs-keyword">import</span> caliban.{<span class="hljs-type">RootResolver</span>, <span class="hljs-type">ZHttpAdapter</span>}
<span class="hljs-keyword">import</span> zhttp.http._
<span class="hljs-keyword">import</span> zhttp.service.<span class="hljs-type">Server</span>
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">ZEnv</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-keyword">import</span> scala.language.postfixOps

<span class="hljs-keyword">sealed</span> <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Role</span></span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Role</span> </span>{
  <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">SoftwareDeveloper</span>       <span class="hljs-keyword">extends</span> <span class="hljs-title">Role</span></span>
  <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">SiteReliabilityEngineer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Role</span></span>
  <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">DevOps</span>                  <span class="hljs-keyword">extends</span> <span class="hljs-title">Role</span></span>
}

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span>(<span class="hljs-params">
    name: <span class="hljs-type">String</span>,
    role: <span class="hljs-type">Role</span>
</span>)</span>

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeesArgs</span>(<span class="hljs-params">role: <span class="hljs-type">Role</span></span>)</span>
<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeArgs</span>(<span class="hljs-params">name: <span class="hljs-type">String</span></span>)</span>

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Queries</span>(<span class="hljs-params">
    @<span class="hljs-type">GQLDescription</span>("<span class="hljs-type">Return</span> all employees with specific role"</span>)</span>
    employees: <span class="hljs-type">EmployeesArgs</span> =&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Employee</span>],
    <span class="hljs-meta">@GQLDescription</span>(<span class="hljs-string">"Find an employee by its name"</span>)
    employee: <span class="hljs-type">EmployeeArgs</span> =&gt; <span class="hljs-type">Option</span>[<span class="hljs-type">Employee</span>]
)
<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">CalibanExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> employees = <span class="hljs-type">List</span>(
    <span class="hljs-type">Employee</span>(<span class="hljs-string">"Alex"</span>, <span class="hljs-type">Role</span>.<span class="hljs-type">DevOps</span>),
    <span class="hljs-type">Employee</span>(<span class="hljs-string">"Maria"</span>, <span class="hljs-type">Role</span>.<span class="hljs-type">SoftwareDeveloper</span>),
    <span class="hljs-type">Employee</span>(<span class="hljs-string">"James"</span>, <span class="hljs-type">Role</span>.<span class="hljs-type">SiteReliabilityEngineer</span>),
    <span class="hljs-type">Employee</span>(<span class="hljs-string">"Peter"</span>, <span class="hljs-type">Role</span>.<span class="hljs-type">SoftwareDeveloper</span>),
    <span class="hljs-type">Employee</span>(<span class="hljs-string">"Julia"</span>, <span class="hljs-type">Role</span>.<span class="hljs-type">SiteReliabilityEngineer</span>),
    <span class="hljs-type">Employee</span>(<span class="hljs-string">"Roberta"</span>, <span class="hljs-type">Role</span>.<span class="hljs-type">DevOps</span>)
  )

  <span class="hljs-keyword">val</span> myApp = <span class="hljs-keyword">for</span> {
    interpreter &lt;- graphQL(
      <span class="hljs-type">RootResolver</span>(
        <span class="hljs-type">Queries</span>(
          args =&gt; employees.filter(e =&gt; args.role == e.role),
          args =&gt; employees.find(e =&gt; e.name == args.name)
        )
      )
    ).interpreter
    _ &lt;- <span class="hljs-type">Server</span>
      .start(
        port = <span class="hljs-number">8088</span>,
        http = <span class="hljs-type">Http</span>.route { <span class="hljs-keyword">case</span> _ -&gt; <span class="hljs-type">Root</span> / <span class="hljs-string">"api"</span> / <span class="hljs-string">"graphql"</span> =&gt;
          <span class="hljs-type">ZHttpAdapter</span>.makeHttpService(interpreter)
        }
      )
      .forever
  } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">ZIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.exitCode

}
</code></pre>
<p>Now let's query all software developers using GraphQL query language:</p>
<pre><code class="hljs css language-graphql">query{
  employees(<span class="hljs-keyword">role</span>: SoftwareDeveloper){
    <span class="hljs-type">name</span>
    <span class="hljs-keyword">role</span>
  }
}
</code></pre>
<p>Here is the <em>curl</em> request of this query:</p>
<pre><code class="hljs css language-bash">curl <span class="hljs-string">'http://localhost:8088/api/graphql'</span> --data-binary <span class="hljs-string">'{"query":"query{\n employees(role: SoftwareDeveloper){\n name\n role\n}\n}"}'</span>
</code></pre>
<p>And the response:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"data"</span> : {
    <span class="hljs-attr">"employees"</span> : [
      {
        <span class="hljs-attr">"name"</span> : <span class="hljs-string">"Maria"</span>,
        <span class="hljs-attr">"role"</span> : <span class="hljs-string">"SoftwareDeveloper"</span>
      },
      {
        <span class="hljs-attr">"name"</span> : <span class="hljs-string">"Peter"</span>,
        <span class="hljs-attr">"role"</span> : <span class="hljs-string">"SoftwareDeveloper"</span>
      }
    ]
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-grpc"></a><a href="#zio-grpc" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO gRPC</h2>
<p><a href="https://scalapb.github.io/zio-grpc/">ZIO-gRPC</a> lets us write purely functional gRPC servers and clients.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-1"></a><a href="#introduction-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Key features of ZIO gRPC:</p>
<ul>
<li><strong>Functional and Type-safe</strong> — Use the power of Functional Programming and the Scala compiler to build robust, correct and fully featured gRPC servers.</li>
<li><strong>Support for Streaming</strong> — Use ZIO's feature-rich <code>ZStream</code>s to create server-streaming, client-streaming, and bi-directionally streaming RPC endpoints.</li>
<li><strong>Highly Concurrent</strong> — Leverage the power of ZIO to build asynchronous clients and servers without deadlocks and race conditions.</li>
<li><strong>Resource Safety</strong> — Safely cancel an RPC call by interrupting the effect. Resources on the server will never leak!</li>
<li><strong>Scala.js Support</strong> — ZIO gRPC comes with Scala.js support, so we can send RPCs to our service from the browser.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-1"></a><a href="#installation-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>First of all we need to add following lines to the <code>project/plugins.sbt</code> file:</p>
<pre><code class="hljs css language-scala">addSbtPlugin(<span class="hljs-string">"com.thesamet"</span> % <span class="hljs-string">"sbt-protoc"</span> % <span class="hljs-string">"1.0.2"</span>)

libraryDependencies +=
  <span class="hljs-string">"com.thesamet.scalapb.zio-grpc"</span> %% <span class="hljs-string">"zio-grpc-codegen"</span> % <span class="hljs-string">"0.5.0"</span>
</code></pre>
<p>Then in order to use this library, we need should add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">PB</span>.targets in <span class="hljs-type">Compile</span> := <span class="hljs-type">Seq</span>(
  scalapb.gen(grpc = <span class="hljs-literal">true</span>) -&gt; (sourceManaged in <span class="hljs-type">Compile</span>).value / <span class="hljs-string">"scalapb"</span>,
  scalapb.zio_grpc.<span class="hljs-type">ZioCodeGenerator</span> -&gt; (sourceManaged in <span class="hljs-type">Compile</span>).value / <span class="hljs-string">"scalapb"</span>
)

libraryDependencies ++= <span class="hljs-type">Seq</span>(
  <span class="hljs-string">"io.grpc"</span> % <span class="hljs-string">"grpc-netty"</span> % <span class="hljs-string">"1.39.0"</span>,
  <span class="hljs-string">"com.thesamet.scalapb"</span> %% <span class="hljs-string">"scalapb-runtime-grpc"</span> % scalapb.compiler.<span class="hljs-type">Version</span>.scalapbVersion
)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-1"></a><a href="#example-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>In this section, we are going to implement a simple server and client for the following gRPC <em>proto</em> file:</p>
<pre><code class="hljs css language-protobuf">syntax = "proto3";

option java_multiple_files = true;
option java_package = "io.grpc.examples.helloworld";
option java_outer_classname = "HelloWorldProto";
option objc_class_prefix = "HLW";

package helloworld;

// The greeting service definition.
service Greeter {
  rpc SayHello (HelloRequest) returns (HelloReply) {}
}

// The request message containing the user's name.
message HelloRequest {
  string name = 1;
}

// The response message containing the greetings
message HelloReply {
  string message = 1;
}
</code></pre>
<p>The hello world server would be like this:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> io.grpc.<span class="hljs-type">ServerBuilder</span>
<span class="hljs-keyword">import</span> io.grpc.examples.helloworld.helloworld.<span class="hljs-type">ZioHelloworld</span>.<span class="hljs-type">ZGreeter</span>
<span class="hljs-keyword">import</span> io.grpc.examples.helloworld.helloworld.{<span class="hljs-type">HelloReply</span>, <span class="hljs-type">HelloRequest</span>}
<span class="hljs-keyword">import</span> io.grpc.protobuf.services.<span class="hljs-type">ProtoReflectionService</span>
<span class="hljs-keyword">import</span> scalapb.zio_grpc.{<span class="hljs-type">ServerLayer</span>, <span class="hljs-type">ServiceList</span>}
<span class="hljs-keyword">import</span> zio.console.putStrLn
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">URIO</span>, <span class="hljs-type">ZEnv</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">HelloWorldServer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> helloService: <span class="hljs-type">ZGreeter</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Any</span>] =
    (request: <span class="hljs-type">HelloRequest</span>) =&gt;
      putStrLn(<span class="hljs-string">s"Got request: <span class="hljs-subst">$request</span>"</span>) *&gt;
        <span class="hljs-type">ZIO</span>.succeed(<span class="hljs-type">HelloReply</span>(<span class="hljs-string">s"Hello, <span class="hljs-subst">${request.name}</span>"</span>))


  <span class="hljs-keyword">val</span> myApp = <span class="hljs-keyword">for</span> {
    _ &lt;- putStrLn(<span class="hljs-string">"Server is running. Press Ctrl-C to stop."</span>)
    _ &lt;- <span class="hljs-type">ServerLayer</span>
      .fromServiceList(
        <span class="hljs-type">ServerBuilder</span>
          .forPort(<span class="hljs-number">9000</span>)
          .addService(<span class="hljs-type">ProtoReflectionService</span>.newInstance()),
        <span class="hljs-type">ServiceList</span>.add(helloService))
      .build.useForever
  } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.exitCode
}
</code></pre>
<p>And this is an example of using its client:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> io.grpc.<span class="hljs-type">ManagedChannelBuilder</span>
<span class="hljs-keyword">import</span> io.grpc.examples.helloworld.helloworld.<span class="hljs-type">HelloRequest</span>
<span class="hljs-keyword">import</span> io.grpc.examples.helloworld.helloworld.<span class="hljs-type">ZioHelloworld</span>.<span class="hljs-type">GreeterClient</span>
<span class="hljs-keyword">import</span> scalapb.zio_grpc.<span class="hljs-type">ZManagedChannel</span>
<span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">URIO</span>}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">HelloWorldClient</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">myApp</span> </span>=
    <span class="hljs-keyword">for</span> {
      r &lt;- <span class="hljs-type">GreeterClient</span>.sayHello(<span class="hljs-type">HelloRequest</span>(<span class="hljs-string">"World"</span>))
      _ &lt;- putStrLn(r.message)
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">val</span> clientLayer =
    <span class="hljs-type">GreeterClient</span>.live(
      <span class="hljs-type">ZManagedChannel</span>(
        <span class="hljs-type">ManagedChannelBuilder</span>.forAddress(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">9000</span>).usePlaintext()
      )
    )

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.provideCustomLayer(clientLayer).exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="distage"></a><a href="#distage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Distage</h2>
<p><a href="https://izumi.7mind.io/distage/">Distage</a> is a compile-time safe, transparent, and debuggable Dependency Injection framework for pure FP Scala.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-2"></a><a href="#introduction-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>By using <em>Distage</em> we can auto-wire all components of our application.</p>
<ul>
<li>We don't need to manually link components together</li>
<li>We don't need to manually specify the order of allocation and allocation of dependencies. This will be derived automatically from the dependency order.</li>
<li>We can override any component within the dependency graph.</li>
<li>It helps us to create different configurations of our components for different use cases.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-2"></a><a href="#installation-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.7mind.izumi"</span> %% <span class="hljs-string">"distage-core"</span> % <span class="hljs-string">"1.0.8"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-2"></a><a href="#example-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>In this example we create a <code>RandomApp</code> comprising two <code>Random</code> and <code>Logger</code> services. By using <code>ModuleDef</code> we <em>bind</em> services to their implementations:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> distage.{<span class="hljs-type">Activation</span>, <span class="hljs-type">Injector</span>, <span class="hljs-type">ModuleDef</span>, <span class="hljs-type">Roots</span>}
<span class="hljs-keyword">import</span> izumi.distage.model.<span class="hljs-type">Locator</span>
<span class="hljs-keyword">import</span> izumi.distage.model.definition.<span class="hljs-type">Lifecycle</span>
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">Task</span>, <span class="hljs-type">UIO</span>, <span class="hljs-type">URIO</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-keyword">import</span> java.time.<span class="hljs-type">LocalDateTime</span>

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Random</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">nextInteger</span></span>: <span class="hljs-type">UIO</span>[<span class="hljs-type">Int</span>]
}

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScalaRandom</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Random</span> </span>{
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">nextInteger</span></span>: <span class="hljs-type">UIO</span>[<span class="hljs-type">Int</span>] =
    <span class="hljs-type">ZIO</span>.effectTotal(scala.util.<span class="hljs-type">Random</span>.nextInt())
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Logger</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(name: <span class="hljs-type">String</span>): <span class="hljs-type">Task</span>[<span class="hljs-type">Unit</span>]
}

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsoleLogger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Logger</span> </span>{
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">log</span></span>(line: <span class="hljs-type">String</span>): <span class="hljs-type">Task</span>[<span class="hljs-type">Unit</span>] = {
    <span class="hljs-keyword">val</span> timeStamp = <span class="hljs-type">LocalDateTime</span>.now()
    <span class="hljs-type">ZIO</span>.effect(println(<span class="hljs-string">s"<span class="hljs-subst">$timeStamp</span>: <span class="hljs-subst">$line</span>"</span>))
  }
}

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RandomApp</span>(<span class="hljs-params">random: <span class="hljs-type">Random</span>, logger: <span class="hljs-type">Logger</span></span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>: <span class="hljs-type">Task</span>[<span class="hljs-type">Unit</span>] = <span class="hljs-keyword">for</span> {
    random &lt;- random.nextInteger
    _ &lt;- logger.log(<span class="hljs-string">s"random number generated: <span class="hljs-subst">$random</span>"</span>)
  } <span class="hljs-keyword">yield</span> ()
}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">DistageExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">RandomAppModule</span></span>: <span class="hljs-type">ModuleDef</span> = <span class="hljs-keyword">new</span> <span class="hljs-type">ModuleDef</span> {
    make[<span class="hljs-type">Random</span>].from[<span class="hljs-type">ScalaRandom</span>]
    make[<span class="hljs-type">Logger</span>].from[<span class="hljs-type">ConsoleLogger</span>]
    make[<span class="hljs-type">RandomApp</span>] <span class="hljs-comment">// `.from` is not required for concrete classes</span>
  }
  
  <span class="hljs-keyword">val</span> resource: <span class="hljs-type">Lifecycle</span>[<span class="hljs-type">Task</span>, <span class="hljs-type">Locator</span>] = <span class="hljs-type">Injector</span>[<span class="hljs-type">Task</span>]().produce(
    plan = <span class="hljs-type">Injector</span>[<span class="hljs-type">Task</span>]().plan(
      bindings = <span class="hljs-type">RandomAppModule</span>,
      activation = <span class="hljs-type">Activation</span>.empty,
      roots = <span class="hljs-type">Roots</span>.target[<span class="hljs-type">RandomApp</span>]
    )
  )

  <span class="hljs-keyword">val</span> myApp: <span class="hljs-type">Task</span>[<span class="hljs-type">Unit</span>] = resource.use(locator =&gt; locator.get[<span class="hljs-type">RandomApp</span>].run)

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="logstage"></a><a href="#logstage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LogStage</h2>
<p><a href="https://izumi.7mind.io/logstage/">LogStage</a> is a zero-cost structural logging framework for Scala &amp; Scala.js.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-3"></a><a href="#introduction-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Some key features of <em>LogStage</em>:</p>
<ol>
<li>LogStage extracts structure from ordinary string interpolations in your log messages with zero changes to code.</li>
<li>LogStage uses macros to extract log structure, it is faster at runtime than a typical reflective structural logging frameworks</li>
<li>Log contexts</li>
<li>Console, File, and SLF4J sinks included, File sink supports log rotation,</li>
<li>Human-readable output and JSON output included,</li>
<li>Method-level logging granularity. Can configure methods com.example.Service.start and com.example.Service.doSomething independently,</li>
<li>Slf4J adapters: route legacy Slf4J logs into LogStage router</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="installation-3"></a><a href="#installation-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala"><span class="hljs-comment">// LogStage core library</span>
libraryDependencies += <span class="hljs-string">"io.7mind.izumi"</span> %% <span class="hljs-string">"logstage-core"</span> % <span class="hljs-string">"1.0.8"</span>
</code></pre>
<p>There are also some optional modules:</p>
<pre><code class="hljs css language-scala">libraryDependencies ++= <span class="hljs-type">Seq</span>(
  <span class="hljs-comment">// Json output</span>
  <span class="hljs-string">"io.7mind.izumi"</span> %% <span class="hljs-string">"logstage-rendering-circe"</span> % <span class="hljs-string">"1.0.8"</span>,
  <span class="hljs-comment">// Router from Slf4j to LogStage</span>
  <span class="hljs-string">"io.7mind.izumi"</span> %% <span class="hljs-string">"logstage-adapter-slf4j"</span> % <span class="hljs-string">"1.0.8"</span>,
  <span class="hljs-comment">// LogStage integration with DIStage</span>
  <span class="hljs-string">"io.7mind.izumi"</span> %% <span class="hljs-string">"distage-extension-logstage"</span> % <span class="hljs-string">"1.0.8"</span>,
  <span class="hljs-comment">// Router from LogStage to Slf4J</span>
  <span class="hljs-string">"io.7mind.izumi"</span> %% <span class="hljs-string">"logstage-sink-slf4j "</span> % <span class="hljs-string">"1.0.8"</span>,
)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-3"></a><a href="#example-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>Let's try a simple example of using <em>LogStage</em>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> izumi.fundamentals.platform.uuid.<span class="hljs-type">UUIDGen</span>
<span class="hljs-keyword">import</span> logstage.<span class="hljs-type">LogZIO</span>.log
<span class="hljs-keyword">import</span> logstage.{<span class="hljs-type">IzLogger</span>, <span class="hljs-type">LogIO2</span>, <span class="hljs-type">LogZIO</span>}
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">Has</span>, <span class="hljs-type">URIO</span>, _}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">LogStageExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> myApp = <span class="hljs-keyword">for</span> {
    _ &lt;- log.info(<span class="hljs-string">"I'm logging with logstage!"</span>)
    userId = <span class="hljs-type">UUIDGen</span>.getTimeUUID()
    _ &lt;- log.info(<span class="hljs-string">s"Current <span class="hljs-subst">$userId</span>"</span>)
    _ &lt;- log.info(<span class="hljs-string">"I'm logging within the same fiber!"</span>)
    f &lt;- log.info(<span class="hljs-string">"I'm logging within a new fiber!"</span>).fork
    _ &lt;- f.join
  } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">val</span> loggerLayer: <span class="hljs-type">ULayer</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">LogIO2</span>[<span class="hljs-type">IO</span>]]] =
    <span class="hljs-type">ZLayer</span>.succeed(<span class="hljs-type">LogZIO</span>.withFiberId(<span class="hljs-type">IzLogger</span>()))

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.provideLayer(loggerLayer).exitCode
}
</code></pre>
<p>The output of this program would be something like this:</p>
<pre><code class="hljs">I <span class="hljs-number">2021</span>-<span class="hljs-number">07</span>-<span class="hljs-number">26</span>T21:<span class="hljs-number">27</span>:<span class="hljs-number">35.164</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LogStageExample</span>.</span></span>scala:<span class="hljs-number">8</span>)  …mpty&gt;.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LogStageExample</span>.</span></span>myApp <span class="hljs-literal">[<span class="hljs-number">14</span>:<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">1</span>]</span> fiberId=<span class="hljs-constructor">Id(1627318654646,1)</span> I'm logging <span class="hljs-keyword">with</span> logstage!
I <span class="hljs-number">2021</span>-<span class="hljs-number">07</span>-<span class="hljs-number">26</span>T21:<span class="hljs-number">27</span>:<span class="hljs-number">35.252</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LogStageExample</span>.</span></span>scala:<span class="hljs-number">10</span>)  &lt;.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LogStageExample</span>.</span></span>myApp.<span class="hljs-number">8</span> <span class="hljs-literal">[<span class="hljs-number">14</span>:<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">1</span>]</span> fiberId=<span class="hljs-constructor">Id(1627318654646,1)</span> Current userId=<span class="hljs-number">93546810</span>-ee32-<span class="hljs-number">11</span>eb-a393-<span class="hljs-number">11</span>bc5b145beb
I <span class="hljs-number">2021</span>-<span class="hljs-number">07</span>-<span class="hljs-number">26</span>T21:<span class="hljs-number">27</span>:<span class="hljs-number">35.266</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LogStageExample</span>.</span></span>scala:<span class="hljs-number">11</span>)  &lt;.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">L</span>.</span></span>myApp.<span class="hljs-number">8.10</span> <span class="hljs-literal">[<span class="hljs-number">14</span>:<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">1</span>]</span> fiberId=<span class="hljs-constructor">Id(1627318654646,1)</span> I'm logging within the same fiber!
I <span class="hljs-number">2021</span>-<span class="hljs-number">07</span>-<span class="hljs-number">26</span>T21:<span class="hljs-number">27</span>:<span class="hljs-number">35.270</span> (<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">LogStageExample</span>.</span></span>scala:<span class="hljs-number">12</span>)  &lt;.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">L</span>.</span></span>m.<span class="hljs-number">8.10</span>.<span class="hljs-number">11</span> <span class="hljs-literal">[<span class="hljs-number">16</span>:<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">2</span>]</span> fiberId=<span class="hljs-constructor">Id(1627318655269,2)</span> I'm logging within a <span class="hljs-keyword">new</span> fiber!
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="munit-zio"></a><a href="#munit-zio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MUnit ZIO</h2>
<p><a href="https://github.com/poslegm/munit-zio">MUnit ZIO</a> is an integration library between MUnit and ZIO.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-4"></a><a href="#introduction-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p><a href="https://scalameta.org/munit/">MUnit</a> is a Scala testing library that is implemented as a JUnit runner. It has <em>actionable errors</em>, so the test reports are colorfully pretty-printed, stack traces are highlighted, error messages are pointed to the source code location where the failure happened.</p>
<p>The MUnit ZIO enables us to write tests that return <code>ZIO</code> values without needing to call any unsafe methods (e.g. <code>Runtime#unsafeRun</code>).</p>
<h3><a class="anchor" aria-hidden="true" id="installation-4"></a><a href="#installation-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following lines in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"org.scalameta"</span> %% <span class="hljs-string">"munit"</span> % <span class="hljs-string">"0.7.27"</span> % <span class="hljs-type">Test</span>
libraryDependencies += <span class="hljs-string">"com.github.poslegm"</span> %% <span class="hljs-string">"munit-zio"</span> % <span class="hljs-string">"0.0.2"</span> % <span class="hljs-type">Test</span>
</code></pre>
<p>If we are using a version of sbt lower than 1.5.0, we will also need to add:</p>
<pre><code class="hljs css language-scala">testFrameworks += <span class="hljs-keyword">new</span> <span class="hljs-type">TestFramework</span>(<span class="hljs-string">"munit.Framework"</span>)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-4"></a><a href="#example-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>Here is a simple MUnit spec that is integrated with the <code>ZIO</code> effect:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> munit._
<span class="hljs-keyword">import</span> zio._

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleZIOSpec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ZSuite</span> </span>{
  testZ(<span class="hljs-string">"1 + 1 = 2"</span>) {
    <span class="hljs-keyword">for</span> {
      a &lt;- <span class="hljs-type">ZIO</span>(<span class="hljs-number">1</span>)
      b &lt;- <span class="hljs-type">ZIO</span>(<span class="hljs-number">1</span>)
    }
    <span class="hljs-keyword">yield</span> assertEquals(a + b, <span class="hljs-number">2</span>)
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="rezilience"></a><a href="#rezilience" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rezilience</h2>
<p><a href="https://github.com/svroonland/rezilience">Rezilience</a> is a ZIO-native library for making resilient distributed systems.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-5"></a><a href="#introduction-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Rezilience is a ZIO-native fault tolerance library with a collection of policies for making asynchronous systems more resilient to failures inspired by Polly, Resilience4J, and Akka. It does not have external library dependencies other than ZIO.</p>
<p>It comprises these policies:</p>
<ul>
<li><strong>CircuitBreaker</strong> — Temporarily prevent trying calls after too many failures</li>
<li><strong>RateLimiter</strong> — Limit the rate of calls to a system</li>
<li><strong>Bulkhead</strong> — Limit the number of in-flight calls to a system</li>
<li><strong>Retry</strong> — Try again after transient failures</li>
<li><strong>Timeout</strong> — Interrupt execution if a call does not complete in time</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-5"></a><a href="#installation-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.github.ghostdogpr"</span> %% <span class="hljs-string">"caliban"</span> % <span class="hljs-string">"1.1.0"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-5"></a><a href="#example-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>Let's try an example of writing <em>Circuit Breaker</em> policy for calling an external API:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> nl.vroste.rezilience.<span class="hljs-type">CircuitBreaker</span>.{<span class="hljs-type">CircuitBreakerCallError</span>, <span class="hljs-type">State</span>}
<span class="hljs-keyword">import</span> nl.vroste.rezilience._
<span class="hljs-keyword">import</span> zio._
<span class="hljs-keyword">import</span> zio.clock.<span class="hljs-type">Clock</span>
<span class="hljs-keyword">import</span> zio.console.{<span class="hljs-type">Console</span>, putStrLn}
<span class="hljs-keyword">import</span> zio.duration._

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">CircuitBreakerExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">callExternalSystem</span></span>: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span>, <span class="hljs-type">String</span>, <span class="hljs-type">Nothing</span>] =
    putStrLn(<span class="hljs-string">"External service called, but failed!"</span>).orDie *&gt;
      <span class="hljs-type">ZIO</span>.fail(<span class="hljs-string">"External service failed!"</span>)

  <span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-type">CircuitBreaker</span>.withMaxFailures(
      maxFailures = <span class="hljs-number">10</span>,
      resetPolicy = <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">1.</span>second),
      onStateChange = (state: <span class="hljs-type">State</span>) =&gt;
        <span class="hljs-type">ZIO</span>(println(<span class="hljs-string">s"State changed to <span class="hljs-subst">$state</span>"</span>)).orDie
    ).use { cb =&gt;
      <span class="hljs-keyword">for</span> {
        _ &lt;- <span class="hljs-type">ZIO</span>.foreach_(<span class="hljs-number">1</span> to <span class="hljs-number">10</span>)(_ =&gt; cb(callExternalSystem).either)
        _ &lt;- cb(callExternalSystem).catchAll(errorHandler)
        _ &lt;- <span class="hljs-type">ZIO</span>.sleep(<span class="hljs-number">2.</span>seconds)
        _ &lt;- cb(callExternalSystem).catchAll(errorHandler)
      } <span class="hljs-keyword">yield</span> ()
    }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">errorHandler</span></span>: <span class="hljs-type">CircuitBreakerCallError</span>[<span class="hljs-type">String</span>] =&gt; <span class="hljs-type">URIO</span>[<span class="hljs-type">Console</span>, <span class="hljs-type">Unit</span>] = {
    <span class="hljs-keyword">case</span> <span class="hljs-type">CircuitBreaker</span>.<span class="hljs-type">CircuitBreakerOpen</span> =&gt;
      putStrLn(<span class="hljs-string">"Circuit breaker blocked the call to our external system"</span>).orDie
    <span class="hljs-keyword">case</span> <span class="hljs-type">CircuitBreaker</span>.<span class="hljs-type">WrappedError</span>(error) =&gt;
      putStrLn(<span class="hljs-string">s"External system threw an exception: <span class="hljs-subst">$error</span>"</span>).orDie
  }
  
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="tranzactio"></a><a href="#tranzactio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TranzactIO</h2>
<p><a href="https://github.com/gaelrenoux/tranzactio">TranzactIO</a> is a ZIO wrapper for some Scala database access libraries, currently for <a href="https://github.com/tpolecat/doobie">Doobie</a> and <a href="https://github.com/playframework/anorm">Anorm</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-6"></a><a href="#introduction-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Using functional effect database access libraries like <em>Doobie</em> enforces us to use their specialized monads like <code>ConnectionIO</code> for <em>Doobie</em>. The goal of <em>TranzactIO</em> is to provide seamless integration with these libraries to help us to stay in the <code>ZIO</code> world.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-6"></a><a href="#installation-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.github.gaelrenoux"</span> %% <span class="hljs-string">"tranzactio"</span> % <span class="hljs-string">"2.1.0"</span>
</code></pre>
<p>In addition, we need to declare the database access library we are using. For example, for the next example we need to add following dependencies for <em>Doobie</em> integration:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"org.tpolecat"</span> %% <span class="hljs-string">"doobie-core"</span> % <span class="hljs-string">"0.13.4"</span>
libraryDependencies += <span class="hljs-string">"org.tpolecat"</span> %% <span class="hljs-string">"doobie-h2"</span>   % <span class="hljs-string">"0.13.4"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-6"></a><a href="#example-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>Let's try an example of simple <em>Doobie</em> program:</p>
<pre><code class="hljs css language-scala">import doobie.implicits._
import io.github.gaelrenoux.tranzactio.doobie
import io.github.gaelrenoux.tranzactio.doobie.{Connection, Database, TranzactIO, tzio}
import org.h2.jdbcx.JdbcDataSource
import zio.blocking.Blocking
import zio.clock.Clock
import zio.console.{Console, putStrLn}
import zio.{ExitCode, Has, URIO, ZIO, ZLayer, blocking}

import javax.sql.DataSource

object TranzactIOExample extends zio.App {

  val query: ZIO[Connection with Console, Throwable, Unit] = for {
    _ &lt;- PersonQuery.setup
    _ &lt;- PersonQuery.insert(Person("William", "Stewart"))
    _ &lt;- PersonQuery.insert(Person("Michelle", "Streeter"))
    _ &lt;- PersonQuery.insert(Person("Johnathon", "Martinez"))
    users &lt;- PersonQuery.list
    _ &lt;- putStrLn(users.toString)
  } yield ()

  val myApp: ZIO[zio.ZEnv, Throwable, Unit] =
    Database.transactionOrWidenR(query).provideCustomLayer(services.database)

  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =
    myApp.exitCode
}

case class Person(firstName: String, lastName: String)

object PersonQuery {
  def list: TranzactIO[List[Person]] = tzio {
    sql"""SELECT first_name, last_name FROM person""".query[Person].to[List]
  }

  def setup: TranzactIO[Unit] = tzio {
    sql"""
        CREATE TABLE person (
          first_name VARCHAR NOT NULL,
          last_name VARCHAR NOT NULL
        )
        """.update.run.map(_ =&gt; ())
  }

  def insert(p: Person): TranzactIO[Unit] = tzio {
    sql"""INSERT INTO person (first_name, last_name) VALUES (${p.firstName}, ${p.lastName})""".update.run
      .map(_ =&gt; ())
  }
}

object services {
  val datasource: ZLayer[Blocking, Throwable, Has[DataSource]] =
    ZLayer.fromEffect(
      blocking.effectBlocking {
        val ds = new JdbcDataSource
        ds.setURL(s"jdbc:h2:mem:mydb;DB_CLOSE_DELAY=10")
        ds.setUser("sa")
        ds.setPassword("sa")
        ds
      }
    )

  val database: ZLayer[Any, Throwable, doobie.Database.Database] =
    (Blocking.live &gt;&gt;&gt; datasource ++ Blocking.live ++ Clock.live) &gt;&gt;&gt; Database.fromDatasource
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-arrow"></a><a href="#zio-arrow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Arrow</h2>
<p><a href="https://github.com/zio-mesh/zio-arrow/">ZIO Arrow</a> provides the <code>ZArrow</code> effect, which is a high-performance composition effect for the ZIO ecosystem.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-7"></a><a href="#introduction-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p><code>ZArrow[E, A, B]</code> is an effect representing a computation parametrized over the input (<code>A</code>), and the output (<code>B</code>) that may fail with an <code>E</code>. Arrows focus on <strong>composition</strong> and <strong>high-performance computation</strong>. They are like simple functions, but they are lifted into the <code>ZArrow</code> context.</p>
<p><code>ZArrow</code> delivers three main capabilities:</p>
<ul>
<li><p>** High-Performance** — <code>ZArrow</code> exploits <code>JVM</code> internals to dramatically decrease the number of allocations and dispatches, yielding an unprecedented runtime performance.</p></li>
<li><p><strong>Abstract interface</strong> — <code>Arrow</code> is a more abstract data type, than ZIO Monad. It's more abstract than ZIO Streams. In a nutshell, <code>ZArrow</code> allows a function-like interface that can have both different inputs and different outputs.</p></li>
<li><p><strong>Easy Integration</strong> — <code>ZArrow</code> can both input and output <code>ZIO Monad</code> and <code>ZIO Stream</code>, simplifying application development with different ZIO Effect types.</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-7"></a><a href="#installation-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.github.neurodyne"</span> %% <span class="hljs-string">"zio-arrow"</span> % <span class="hljs-string">"0.2.1"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-7"></a><a href="#example-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>In this example we are going to write a repetitive task of reading a number from standard input and then power by 2 and then print the result:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.arrow.<span class="hljs-type">ZArrow</span>
<span class="hljs-keyword">import</span> zio.arrow.<span class="hljs-type">ZArrow</span>._
<span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">URIO</span>}

<span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ArrowExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> isPositive : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">Int</span>, <span class="hljs-type">Boolean</span>]     = <span class="hljs-type">ZArrow</span>((_: <span class="hljs-type">Int</span>) &gt; <span class="hljs-number">0</span>)
  <span class="hljs-keyword">val</span> toStr      : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">Any</span>, <span class="hljs-type">String</span>]      = <span class="hljs-type">ZArrow</span>((i: <span class="hljs-type">Any</span>) =&gt; i.toString)
  <span class="hljs-keyword">val</span> toInt      : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">String</span>, <span class="hljs-type">Int</span>]      = <span class="hljs-type">ZArrow</span>((i: <span class="hljs-type">String</span>) =&gt; i.toInt)
  <span class="hljs-keyword">val</span> getLine    : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">IOException</span>, <span class="hljs-type">Any</span>, <span class="hljs-type">String</span>]  = <span class="hljs-type">ZArrow</span>.liftM((_: <span class="hljs-type">Any</span>) =&gt; getStrLn.provideLayer(<span class="hljs-type">Console</span>.live))
  <span class="hljs-keyword">val</span> printStr   : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">IOException</span>, <span class="hljs-type">String</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-type">ZArrow</span>.liftM((line: <span class="hljs-type">String</span>) =&gt; putStr(line).provideLayer(<span class="hljs-type">Console</span>.live))
  <span class="hljs-keyword">val</span> printLine  : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">IOException</span>, <span class="hljs-type">String</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-type">ZArrow</span>.liftM((line: <span class="hljs-type">String</span>) =&gt; putStrLn(line).provideLayer(<span class="hljs-type">Console</span>.live))
  <span class="hljs-keyword">val</span> power2     : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">Int</span>, <span class="hljs-type">Double</span>]      = <span class="hljs-type">ZArrow</span>((i: <span class="hljs-type">Int</span>) =&gt; <span class="hljs-type">Math</span>.pow(i, <span class="hljs-number">2</span>))
  <span class="hljs-keyword">val</span> enterNumber: <span class="hljs-type">ZArrow</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">Unit</span>, <span class="hljs-type">String</span>]     = <span class="hljs-type">ZArrow</span>((_: <span class="hljs-type">Unit</span>) =&gt; <span class="hljs-string">"Enter positive number (-1 to exit): "</span>)
  <span class="hljs-keyword">val</span> goodbye    : <span class="hljs-type">ZArrow</span>[<span class="hljs-type">Nothing</span>, <span class="hljs-type">Any</span>, <span class="hljs-type">String</span>]      = <span class="hljs-type">ZArrow</span>((_: <span class="hljs-type">Any</span>) =&gt; <span class="hljs-string">"Goodbye!"</span>)

  <span class="hljs-keyword">val</span> app: <span class="hljs-type">ZArrow</span>[<span class="hljs-type">IOException</span>, <span class="hljs-type">Unit</span>, <span class="hljs-type">Boolean</span>] =
    enterNumber &gt;&gt;&gt; printStr &gt;&gt;&gt; getLine &gt;&gt;&gt; toInt &gt;&gt;&gt;
      ifThenElse(isPositive)(
        power2 &gt;&gt;&gt; toStr &gt;&gt;&gt; printLine &gt;&gt;&gt; <span class="hljs-type">ZArrow</span>((_: <span class="hljs-type">Any</span>) =&gt; <span class="hljs-literal">true</span>)
      )(
        <span class="hljs-type">ZArrow</span>((_: <span class="hljs-type">Any</span>) =&gt; <span class="hljs-literal">false</span>)
      )

  <span class="hljs-keyword">val</span> myApp = whileDo(app)(<span class="hljs-type">ZArrow</span>(_ =&gt; ())) &gt;&gt;&gt; goodbye &gt;&gt;&gt; printLine

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.run(()).exitCode
}
</code></pre>
<p>Let's see an example of running this program:</p>
<pre><code class="hljs">Enter positive number (-<span class="hljs-number">1</span> to <span class="hljs-keyword">exit</span>): <span class="hljs-number">25</span>
<span class="hljs-number">625.0</span>
Enter positive number (-<span class="hljs-number">1</span> to <span class="hljs-keyword">exit</span>): <span class="hljs-number">8</span>
<span class="hljs-number">64.0</span>
Enter positive number (-<span class="hljs-number">1</span> to <span class="hljs-keyword">exit</span>): -<span class="hljs-number">1</span>
Goodbye!
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-amqp"></a><a href="#zio-amqp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO AMQP</h2>
<p><a href="https://github.com/svroonland/zio-amqp">ZIO AMQP</a> is a ZIO-based AMQP client for Scala.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-8"></a><a href="#introduction-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>ZIO AMQP is a ZIO-based wrapper around the RabbitMQ client. It provides a streaming interface to AMQP queues and helps to prevent us from shooting ourselves in the foot with thread-safety issues.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-8"></a><a href="#installation-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"nl.vroste"</span> %% <span class="hljs-string">"zio-amqp"</span> % <span class="hljs-string">"0.2.0"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-8"></a><a href="#example-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>First, let's create an instance of RabbitMQ:</p>
<pre><code class="hljs">docker run -d --name some-rabbit -p <span class="hljs-number">5672</span>:<span class="hljs-number">5672</span> -p <span class="hljs-number">5673</span>:<span class="hljs-number">5673</span> -p <span class="hljs-number">15672</span>:<span class="hljs-number">15672</span> rabbitmq:<span class="hljs-number">3</span>-management
</code></pre>
<p>Then we need to create <code>my_exchange</code> and <code>my_queue</code> and bind the queue to the exchange via the RabbitMQ management dashboard (<code>localhost:15672</code>).</p>
<p>Now we can run the example below:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> nl.vroste.zio.amqp._
<span class="hljs-keyword">import</span> zio._
<span class="hljs-keyword">import</span> zio.blocking._
<span class="hljs-keyword">import</span> zio.clock.<span class="hljs-type">Clock</span>
<span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.duration.durationInt
<span class="hljs-keyword">import</span> zio.random.<span class="hljs-type">Random</span>

<span class="hljs-keyword">import</span> java.net.<span class="hljs-type">URI</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ZIOAMQPExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> channelM: <span class="hljs-type">ZManaged</span>[<span class="hljs-type">Blocking</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">Channel</span>] = <span class="hljs-keyword">for</span> {
    connection &lt;- <span class="hljs-type">Amqp</span>.connect(<span class="hljs-type">URI</span>.create(<span class="hljs-string">"amqp://localhost:5672"</span>))
    channel &lt;- <span class="hljs-type">Amqp</span>.createChannel(connection)
  } <span class="hljs-keyword">yield</span> channel

  <span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Blocking</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Random</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">Unit</span>] =
    channelM.use { channel =&gt;
      <span class="hljs-keyword">val</span> producer: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Blocking</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Random</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Clock</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">Long</span>] =
        zio.random.nextUUID
          .flatMap(uuid =&gt;
            channel.publish(<span class="hljs-string">"my_exchange"</span>, uuid.toString.getBytes)
              .map(_ =&gt; ())
          ).schedule(<span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">1.</span>seconds))

      <span class="hljs-keyword">val</span> consumer: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Blocking</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">Unit</span>] = channel
        .consume(queue = <span class="hljs-string">"my_queue"</span>, consumerTag = <span class="hljs-string">"my_consumer"</span>)
        .mapM { record =&gt;
          <span class="hljs-keyword">val</span> deliveryTag = record.getEnvelope.getDeliveryTag
          putStrLn(<span class="hljs-string">s"Received <span class="hljs-subst">$deliveryTag</span>: <span class="hljs-subst">${new String(record.getBody)}</span>"</span>) *&gt;
            channel.ack(deliveryTag)
        }
        .runDrain

      <span class="hljs-keyword">for</span> {
        p &lt;- producer.fork
        c &lt;- consumer.fork
        _ &lt;- p.zip(c).join
      } <span class="hljs-keyword">yield</span> ()
    }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-aws"></a><a href="#zio-aws" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO AWS</h2>
<p><a href="https://github.com/vigoo/zio-aws">ZIO AWS</a> is a low-level AWS wrapper for ZIO for all the AWS services using the AWS Java SDK v2.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-9"></a><a href="#introduction-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>The goal is to have access to all AWS functionality for cases when only simple, direct access is needed from a ZIO application, or to be used as a building block for higher-level wrappers around specific services.</p>
<p>Key features of ZIO AWS:</p>
<ul>
<li>Common configuration layer</li>
<li>ZIO module layer per AWS service</li>
<li>Wrapper for all operations on all services</li>
<li>HTTP service implementations for functional Scala HTTP libraries, injected through ZIO’s module system</li>
<li>ZStream wrapper around paginated operations</li>
<li>Service-specific extra configuration</li>
<li>More idiomatic Scala request and response types wrapping the Java classes</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-9"></a><a href="#installation-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>There are tones of artifacts <a href="https://vigoo.github.io/zio-aws/docs/artifacts.html">published</a> for each AWS service. We can pick whichever services we need.</p>
<h3><a class="anchor" aria-hidden="true" id="example-9"></a><a href="#example-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>The following example uses the <em>ElasticBeanstalk</em> and <em>EC2</em> APIs:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.github.vigoo"</span> %% <span class="hljs-string">"zio-aws-core"</span>             % <span class="hljs-string">"3.17.8.4"</span>,
libraryDependencies += <span class="hljs-string">"io.github.vigoo"</span> %% <span class="hljs-string">"zio-aws-ec2"</span>              % <span class="hljs-string">"3.17.8.4"</span>,
libraryDependencies += <span class="hljs-string">"io.github.vigoo"</span> %% <span class="hljs-string">"zio-aws-elasticbeanstalk"</span> % <span class="hljs-string">"3.17.8.4"</span>,
libraryDependencies += <span class="hljs-string">"io.github.vigoo"</span> %% <span class="hljs-string">"zio-aws-netty"</span>            % <span class="hljs-string">"3.17.8.4"</span>
</code></pre>
<p>And here is the example code:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> io.github.vigoo.zioaws.core.<span class="hljs-type">AwsError</span>
<span class="hljs-keyword">import</span> io.github.vigoo.zioaws.ec2.<span class="hljs-type">Ec2</span>
<span class="hljs-keyword">import</span> io.github.vigoo.zioaws.ec2.model._
<span class="hljs-keyword">import</span> io.github.vigoo.zioaws.elasticbeanstalk.<span class="hljs-type">ElasticBeanstalk</span>
<span class="hljs-keyword">import</span> io.github.vigoo.zioaws.elasticbeanstalk.model._
<span class="hljs-keyword">import</span> io.github.vigoo.zioaws.{core, ec2, elasticbeanstalk, netty}
<span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.stream._
<span class="hljs-keyword">import</span> zio.{console, _}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ZIOAWSExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> program: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Ec2</span> <span class="hljs-keyword">with</span> <span class="hljs-type">ElasticBeanstalk</span>, <span class="hljs-type">AwsError</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-keyword">for</span> {
      appsResult &lt;- elasticbeanstalk.describeApplications(
        <span class="hljs-type">DescribeApplicationsRequest</span>(applicationNames = <span class="hljs-type">Some</span>(<span class="hljs-type">List</span>(<span class="hljs-string">"my-service"</span>)))
      )
      app &lt;- appsResult.applications.map(_.headOption)
      _ &lt;- app <span class="hljs-keyword">match</span> {
        <span class="hljs-keyword">case</span> <span class="hljs-type">Some</span>(appDescription) =&gt;
          <span class="hljs-keyword">for</span> {
            applicationName &lt;- appDescription.applicationName
            _ &lt;- console.putStrLn(
              <span class="hljs-string">s"Got application description for <span class="hljs-subst">$applicationName</span>"</span>
            ).ignore

            envStream = elasticbeanstalk.describeEnvironments(
              <span class="hljs-type">DescribeEnvironmentsRequest</span>(applicationName =
                <span class="hljs-type">Some</span>(applicationName)
              )
            )

            _ &lt;- envStream.run(<span class="hljs-type">Sink</span>.foreach { env =&gt;
              env.environmentName.flatMap { environmentName =&gt;
                (<span class="hljs-keyword">for</span> {
                  environmentId &lt;- env.environmentId
                  _ &lt;- console.putStrLn(
                    <span class="hljs-string">s"Getting the EB resources of <span class="hljs-subst">$environmentName</span>"</span>
                  ).ignore

                  resourcesResult &lt;-
                    elasticbeanstalk.describeEnvironmentResources(
                      <span class="hljs-type">DescribeEnvironmentResourcesRequest</span>(environmentId =
                        <span class="hljs-type">Some</span>(environmentId)
                      )
                    )
                  resources &lt;- resourcesResult.environmentResources
                  _ &lt;- console.putStrLn(
                    <span class="hljs-string">s"Getting the EC2 instances in <span class="hljs-subst">$environmentName</span>"</span>
                  ).ignore
                  instances &lt;- resources.instances
                  instanceIds &lt;- <span class="hljs-type">ZIO</span>.foreach(instances)(_.id)
                  _ &lt;- console.putStrLn(
                    <span class="hljs-string">s"Instance IDs are <span class="hljs-subst">${instanceIds.mkString(", ")}</span>"</span>
                  ).ignore

                  reservationsStream = ec2.describeInstances(
                    <span class="hljs-type">DescribeInstancesRequest</span>(instanceIds = <span class="hljs-type">Some</span>(instanceIds))
                  )
                  _ &lt;- reservationsStream.run(<span class="hljs-type">Sink</span>.foreach { reservation =&gt;
                    reservation.instances
                      .flatMap { instances =&gt;
                        <span class="hljs-type">ZIO</span>.foreach(instances) { instance =&gt;
                          <span class="hljs-keyword">for</span> {
                            id &lt;- instance.instanceId
                            typ &lt;- instance.instanceType
                            launchTime &lt;- instance.launchTime
                            _ &lt;- console.putStrLn(<span class="hljs-string">s"  instance <span class="hljs-subst">$id</span>:"</span>).ignore
                            _ &lt;- console.putStrLn(<span class="hljs-string">s"    type: <span class="hljs-subst">$typ</span>"</span>).ignore
                            _ &lt;- console.putStrLn(
                              <span class="hljs-string">s"    launched at: <span class="hljs-subst">$launchTime</span>"</span>
                            ).ignore
                          } <span class="hljs-keyword">yield</span> ()
                        }
                      }
                  })
                } <span class="hljs-keyword">yield</span> ()).catchAll { error =&gt;
                  console.putStrLnErr(
                    <span class="hljs-string">s"Failed to get info for <span class="hljs-subst">$environmentName</span>: <span class="hljs-subst">$error</span>"</span>
                  ).ignore
                }
              }
            })
          } <span class="hljs-keyword">yield</span> ()
        <span class="hljs-keyword">case</span> <span class="hljs-type">None</span> =&gt;
          <span class="hljs-type">ZIO</span>.unit
      }
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] = { <span class="hljs-comment">//</span>
    <span class="hljs-keyword">val</span> httpClient = netty.<span class="hljs-keyword">default</span>
    <span class="hljs-keyword">val</span> awsConfig  = httpClient &gt;&gt;&gt; core.config.<span class="hljs-keyword">default</span>
    <span class="hljs-keyword">val</span> aws        = awsConfig &gt;&gt;&gt; (ec2.live ++ elasticbeanstalk.live)

    program
      .provideCustomLayer(aws)
      .either
      .flatMap {
        <span class="hljs-keyword">case</span> <span class="hljs-type">Left</span>(error) =&gt;
          console.putStrErr(<span class="hljs-string">s"AWS error: <span class="hljs-subst">$error</span>"</span>).ignore.as(<span class="hljs-type">ExitCode</span>.failure)
        <span class="hljs-keyword">case</span> <span class="hljs-type">Right</span>(_) =&gt;
          <span class="hljs-type">ZIO</span>.unit.as(<span class="hljs-type">ExitCode</span>.success)
      }
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-aws-s3"></a><a href="#zio-aws-s3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO AWS S3</h2>
<p><a href="https://github.com/zio-mesh/zio-aws-s3">ZIO AWS S3</a> is a ZIO integration with AWS S3 SDK.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-10"></a><a href="#introduction-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>This project aims to ease ZIO integration with AWS S3, providing a clean, simple and efficient API.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-10"></a><a href="#installation-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.github.neurodyne"</span> %% <span class="hljs-string">"zio-aws-s3"</span> % <span class="hljs-string">"0.4.13"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-10"></a><a href="#example-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> software.amazon.awssdk.regions.<span class="hljs-type">Region</span>
<span class="hljs-keyword">import</span> software.amazon.awssdk.services.s3.<span class="hljs-type">S3AsyncClient</span>
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">URIO</span>, _}
<span class="hljs-keyword">import</span> zio_aws_s3.<span class="hljs-type">AwsApp</span>.<span class="hljs-type">AwsLink</span>
<span class="hljs-keyword">import</span> zio_aws_s3.{<span class="hljs-type">AwsAgent</span>, <span class="hljs-type">AwsApp</span>}

<span class="hljs-keyword">import</span> scala.jdk.<span class="hljs-type">CollectionConverters</span>._

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ZIOAWSS3Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> <span class="hljs-type">BUCKET</span> = <span class="hljs-string">"&lt;bucket name&gt;"</span>

  <span class="hljs-keyword">val</span> awsEnv: <span class="hljs-type">ZLayer</span>[<span class="hljs-type">S3AsyncClient</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">AwsLink</span>] =
    <span class="hljs-type">AwsApp</span>.<span class="hljs-type">ExtDeps</span>.live &gt;&gt;&gt; <span class="hljs-type">AwsApp</span>.<span class="hljs-type">AwsLink</span>.live

  <span class="hljs-keyword">val</span> app: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">Unit</span>] = <span class="hljs-keyword">for</span> {
    s3 &lt;- <span class="hljs-type">AwsAgent</span>.createClient(<span class="hljs-type">Region</span>.<span class="hljs-type">US_WEST_2</span>, <span class="hljs-string">"&lt;endpoint&gt;"</span>)
    response &lt;- <span class="hljs-type">AwsApp</span>.listBuckets().provideLayer(awsEnv).provide(s3)
    buckets &lt;- <span class="hljs-type">Task</span>(response.buckets.asScala.toList.map(_.name))
    _ = buckets.foreach(println)
  } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    app.exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-http"></a><a href="#zio-http" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO HTTP</h2>
<p><a href="https://github.com/dream11/zio-http">ZIO HTTP</a> is a scala library to write HTTP applications.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-11"></a><a href="#introduction-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>ZIO HTTP is a Scala library for building HTTP applications. It is powered by ZIO and netty and aims at being the defacto solution for writing, highly scalable, and performant web applications using idiomatic scala.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-11"></a><a href="#installation-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following lines in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.d11"</span> %% <span class="hljs-string">"zhttp"</span>      % <span class="hljs-string">"1.0.0.0-RC13"</span>
libraryDependencies += <span class="hljs-string">"io.d11"</span> %% <span class="hljs-string">"zhttp-test"</span> % <span class="hljs-string">"1.0.0.0-RC13"</span> % <span class="hljs-type">Test</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-11"></a><a href="#example-11" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zhttp.http._
<span class="hljs-keyword">import</span> zhttp.service.<span class="hljs-type">Server</span>
<span class="hljs-keyword">import</span> zio._

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ZIOHTTPExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-comment">// Create HTTP route</span>
  <span class="hljs-keyword">val</span> app: <span class="hljs-type">HttpApp</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Nothing</span>] = <span class="hljs-type">HttpApp</span>.collect {
    <span class="hljs-keyword">case</span> <span class="hljs-type">Method</span>.<span class="hljs-type">GET</span> -&gt; <span class="hljs-type">Root</span> / <span class="hljs-string">"text"</span> =&gt; <span class="hljs-type">Response</span>.text(<span class="hljs-string">"Hello World!"</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-type">Method</span>.<span class="hljs-type">GET</span> -&gt; <span class="hljs-type">Root</span> / <span class="hljs-string">"json"</span> =&gt; <span class="hljs-type">Response</span>.jsonString(<span class="hljs-string">""</span><span class="hljs-string">"{"</span><span class="hljs-string">greetings": "</span><span class="hljs-type">Hello</span> <span class="hljs-type">World</span>!<span class="hljs-string">"}"</span><span class="hljs-string">""</span>)
  }

  <span class="hljs-comment">// Run it like any simple app</span>
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    <span class="hljs-type">Server</span>.start(<span class="hljs-number">8090</span>, app.silent).exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-k8s"></a><a href="#zio-k8s" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO K8s</h2>
<p><a href="https://github.com/coralogix/zio-k8s">ZIO K8S</a> is an idiomatic ZIO client for the Kubernetes API.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-12"></a><a href="#introduction-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>This library provides a client for the full Kubernetes API as well as providing code generator support for custom resources and higher-level concepts such as operators, taking full advantage of the ZIO library.</p>
<p>Using ZIO K8S we can talk to the Kubernetes API that helps us to:</p>
<ul>
<li>Write an operator for our custom resource types</li>
<li>Schedule some jobs in our cluster</li>
<li>Query the cluster for monitoring purposes</li>
<li>Write some cluster management tools</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-12"></a><a href="#installation-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.coralogix"</span> %% <span class="hljs-string">"zio-k8s-client"</span> % <span class="hljs-string">"1.3.3"</span>
</code></pre>
<p>And then we need to choose the proper sttp backend:</p>
<pre><code class="hljs css language-scala"><span class="hljs-string">"com.softwaremill.sttp.client3"</span> %% <span class="hljs-string">"httpclient-backend-zio"</span> % <span class="hljs-string">"3.1.1"</span>,
<span class="hljs-string">"com.softwaremill.sttp.client3"</span> %% <span class="hljs-string">"slf4j-backend"</span>          % <span class="hljs-string">"3.1.1"</span>
</code></pre>
<p>Or the asynchronous version:</p>
<pre><code class="hljs css language-scala"><span class="hljs-string">"com.softwaremill.sttp.client3"</span> %% <span class="hljs-string">"async-http-client-backend-zio"</span> % <span class="hljs-string">"3.1.1"</span>
<span class="hljs-string">"com.softwaremill.sttp.client3"</span> %% <span class="hljs-string">"slf4j-backend"</span>                 % <span class="hljs-string">"3.1.1"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-12"></a><a href="#example-12" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>This is an example of printing the tail logs of a container:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> com.coralogix.zio.k8s.client.<span class="hljs-type">K8sFailure</span>
<span class="hljs-keyword">import</span> com.coralogix.zio.k8s.client.config.httpclient._
<span class="hljs-keyword">import</span> com.coralogix.zio.k8s.client.model.<span class="hljs-type">K8sNamespace</span>
<span class="hljs-keyword">import</span> com.coralogix.zio.k8s.client.v1.pods
<span class="hljs-keyword">import</span> com.coralogix.zio.k8s.client.v1.pods.<span class="hljs-type">Pods</span>
<span class="hljs-keyword">import</span> zio._
<span class="hljs-keyword">import</span> zio.console.<span class="hljs-type">Console</span>

<span class="hljs-keyword">import</span> scala.languageFeature.implicitConversions

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ZIOK8sLogsExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] = (args <span class="hljs-keyword">match</span> {
    <span class="hljs-keyword">case</span> <span class="hljs-type">List</span>(podName) =&gt; tailLogs(podName, <span class="hljs-type">None</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-type">List</span>(podName, containerName) =&gt; tailLogs(podName, <span class="hljs-type">Some</span>(containerName))
    <span class="hljs-keyword">case</span> _ =&gt; console.putStrLnErr(<span class="hljs-string">"Usage: &lt;podname&gt; [containername]"</span>)
  })
    .provideCustomLayer(k8sDefault &gt;&gt;&gt; <span class="hljs-type">Pods</span>.live)
    .exitCode

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tailLogs</span></span>(podName: <span class="hljs-type">String</span>,
               containerName: <span class="hljs-type">Option</span>[<span class="hljs-type">String</span>]
              ): <span class="hljs-type">ZIO</span>[<span class="hljs-type">Pods</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span>, <span class="hljs-type">K8sFailure</span>, <span class="hljs-type">Unit</span>] =
    pods
      .getLog(
        name = podName,
        namespace = <span class="hljs-type">K8sNamespace</span>.<span class="hljs-keyword">default</span>,
        container = containerName,
        follow = <span class="hljs-type">Some</span>(<span class="hljs-literal">true</span>)
      )
      .tap { line: <span class="hljs-type">String</span> =&gt;
        console.putStrLn(line).ignore
      }
      .runDrain
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-kinesis"></a><a href="#zio-kinesis" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Kinesis</h2>
<p><a href="https://github.com/svroonland/zio-kinesis">ZIO Kinesis</a> is a ZIO-based AWS Kinesis client for Scala.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-13"></a><a href="#introduction-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>ZIO Kinesis is an interface to Amazon Kinesis Data Streams for consuming and producing data. This library is built on top of <a href="https://github.com/vigoo/zio-aws">ZIO AWS</a>, a library of automatically generated ZIO wrappers around AWS SDK methods.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-13"></a><a href="#installation-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"nl.vroste"</span> %% <span class="hljs-string">"zio-kinesis"</span> % <span class="hljs-string">"0.20.0"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-13"></a><a href="#example-13" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>This is an example of consuming a stream from Amazon Kinesis:</p>
<pre><code class="hljs css language-scala mdoc:silent:reset"><span class="hljs-keyword">import</span> nl.vroste.zio.kinesis.client.serde.<span class="hljs-type">Serde</span>
<span class="hljs-keyword">import</span> nl.vroste.zio.kinesis.client.zionative.<span class="hljs-type">Consumer</span>
<span class="hljs-keyword">import</span> zio.clock.<span class="hljs-type">Clock</span>
<span class="hljs-keyword">import</span> zio.console.{<span class="hljs-type">Console</span>, putStrLn}
<span class="hljs-keyword">import</span> zio.duration._
<span class="hljs-keyword">import</span> zio.logging.<span class="hljs-type">Logging</span>
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">URIO</span>, _}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ZIOKinesisConsumerExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> loggingLayer: <span class="hljs-type">ZLayer</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Logging</span>] =
    (<span class="hljs-type">Console</span>.live ++ <span class="hljs-type">Clock</span>.live) &gt;&gt;&gt;
      <span class="hljs-type">Logging</span>.console() &gt;&gt;&gt;
      <span class="hljs-type">Logging</span>.withRootLoggerName(getClass.getName)

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    <span class="hljs-type">Consumer</span>
      .consumeWith(
        streamName = <span class="hljs-string">"my-stream"</span>,
        applicationName = <span class="hljs-string">"my-application"</span>,
        deserializer = <span class="hljs-type">Serde</span>.asciiString,
        workerIdentifier = <span class="hljs-string">"worker1"</span>,
        checkpointBatchSize = <span class="hljs-number">1000</span>L,
        checkpointDuration = <span class="hljs-number">5.</span>minutes
      )(record =&gt; putStrLn(<span class="hljs-string">s"Processing record <span class="hljs-subst">$record</span>"</span>))
      .provideCustomLayer(<span class="hljs-type">Consumer</span>.defaultEnvironment ++ loggingLayer)
      .exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-pulsar"></a><a href="#zio-pulsar" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Pulsar</h2>
<p><a href="https://github.com/apache/pulsar">ZIO Pulsar</a> is the <em>Apache Pulsar</em> client for Scala with ZIO and ZIO Streams integration.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-14"></a><a href="#introduction-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>ZIO Pulsar is a purely functional Scala wrapper over the official Pulsar client. Some key features of this library:</p>
<ul>
<li><strong>Type-safe</strong> — Utilizes Scala type system to reduce runtime exceptions present in the official Java client.</li>
<li><strong>Streaming-enabled</strong> — Naturally integrates with ZIO Streams.</li>
<li><strong>ZIO integrated</strong> — Uses common ZIO primitives like ZIO effect and <code>ZManaged</code> to reduce the boilerplate and increase expressiveness.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-14"></a><a href="#installation-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file for <em>Scala 3</em>:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.github.jczuchnowski"</span> %% <span class="hljs-string">"zio-pulsar"</span> % <span class="hljs-string">"0.1"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-14"></a><a href="#example-14" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>First of all we need to create an instance of <em>Apache Pulsar</em> and run that:</p>
<pre><code class="hljs">docker run -<span class="hljs-literal">it</span> <span class="hljs-string">\</span>
  -p <span class="hljs-number">6650</span>:<span class="hljs-number">6650</span> <span class="hljs-string">\</span>
  -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> <span class="hljs-string">\</span>
  --mount source=pulsardata,target=/pulsar/data <span class="hljs-string">\</span>
  --mount source=pulsarconf,target=/pulsar/conf <span class="hljs-string">\</span>
  --network pulsar <span class="hljs-string">\</span>
  apachepulsar/pulsar:<span class="hljs-number">2.7</span>.<span class="hljs-number">0</span> <span class="hljs-string">\</span>
  bin/pulsar standalone
</code></pre>
<p>Now we can run the following example:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> org.apache.pulsar.client.api.{<span class="hljs-type">PulsarClientException</span>, <span class="hljs-type">Schema</span>}
<span class="hljs-keyword">import</span> zio._
<span class="hljs-keyword">import</span> zio.blocking._
<span class="hljs-keyword">import</span> zio.clock._
<span class="hljs-keyword">import</span> zio.console._
<span class="hljs-keyword">import</span> zio.pulsar._
<span class="hljs-keyword">import</span> zio.stream._

<span class="hljs-keyword">import</span> java.nio.charset.<span class="hljs-type">StandardCharsets</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">StreamingExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> topic = <span class="hljs-string">"my-topic"</span>

  <span class="hljs-keyword">val</span> producer: <span class="hljs-type">ZManaged</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">PulsarClient</span>], <span class="hljs-type">PulsarClientException</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-keyword">for</span> {
      sink &lt;- <span class="hljs-type">Producer</span>.make(topic, <span class="hljs-type">Schema</span>.<span class="hljs-type">STRING</span>).map(_.asSink)
      _ &lt;- <span class="hljs-type">Stream</span>.fromIterable(<span class="hljs-number">0</span> to <span class="hljs-number">100</span>).map(i =&gt; <span class="hljs-string">s"Message <span class="hljs-subst">$i</span>"</span>).run(sink).toManaged_
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">val</span> consumer: <span class="hljs-type">ZManaged</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">PulsarClient</span>] <span class="hljs-keyword">with</span> <span class="hljs-type">Blocking</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Console</span>, <span class="hljs-type">PulsarClientException</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-keyword">for</span> {
      builder &lt;- <span class="hljs-type">ConsumerBuilder</span>.make(<span class="hljs-type">Schema</span>.<span class="hljs-type">STRING</span>).toManaged_
      consumer &lt;- builder
        .subscription(<span class="hljs-type">Subscription</span>(<span class="hljs-string">"my-subscription"</span>, <span class="hljs-type">SubscriptionType</span>.<span class="hljs-type">Exclusive</span>))
        .topic(topic)
        .build
      _ &lt;- consumer.receiveStream.take(<span class="hljs-number">10</span>).foreach { e =&gt;
        consumer.acknowledge(e.getMessageId) *&gt;
          putStrLn(<span class="hljs-keyword">new</span> <span class="hljs-type">String</span>(e.getData, <span class="hljs-type">StandardCharsets</span>.<span class="hljs-type">UTF_8</span>)).orDie
      }.toManaged_
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">val</span> myApp =
    <span class="hljs-keyword">for</span> {
      f &lt;- consumer.fork
      _ &lt;- producer
      _ &lt;- f.join.toManaged_
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp
      .provideCustomLayer(
        (<span class="hljs-type">Console</span>.live ++ <span class="hljs-type">Clock</span>.live) &gt;+&gt;
          <span class="hljs-type">PulsarClient</span>.live(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6650</span>)
      ).useNow.exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-saga"></a><a href="#zio-saga" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Saga</h2>
<p><a href="https://github.com/VladKopanev/zio-saga">ZIO Saga</a> is a distributed transaction manager using Saga Pattern.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-15"></a><a href="#introduction-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Sometimes when we are architecting the business logic using microservice architecture we need distributed transactions that are across services.</p>
<p>The <em>Saga Pattern</em> lets us manage distributed transactions by sequencing local transactions with their corresponding compensating actions. A <em>Saga Pattern</em> runs all operations. In the case of failure, it guarantees us to undo all previous works by running the compensating actions.</p>
<p>ZIO Saga allows us to compose our requests and compensating actions from the Saga pattern in one transaction with no boilerplate.</p>
<p>ZIO Saga adds a simple abstraction called <code>Saga</code> that takes the responsibility of proper composition of effects and associated compensating actions.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-15"></a><a href="#installation-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.vladkopanev"</span> %% <span class="hljs-string">"zio-saga-core"</span> % <span class="hljs-string">"0.4.0"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-15"></a><a href="#example-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>In the following example, all API requests have a compensating action. We compose all them together and then run the whole as one transaction:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> com.vladkopanev.zio.saga.<span class="hljs-type">Saga</span>
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">IO</span>, <span class="hljs-type">UIO</span>, <span class="hljs-type">URIO</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-keyword">import</span> com.vladkopanev.zio.saga.<span class="hljs-type">Saga</span>._

<span class="hljs-keyword">val</span> transaction: <span class="hljs-type">Saga</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">String</span>, <span class="hljs-type">Unit</span>] =
  <span class="hljs-keyword">for</span> {
    _ &lt;- bookHotel compensate cancelHotel
    _ &lt;- bookTaxi compensate cancelTaxi
    _ &lt;- bookFlight compensate cancelFlight
  } <span class="hljs-keyword">yield</span> ()

<span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">String</span>, <span class="hljs-type">Unit</span>] = transaction.transact
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-slick-interop"></a><a href="#zio-slick-interop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Slick Interop</h2>
<p><a href="https://github.com/ScalaConsultants/zio-slick-interop">ZIO Slick Interop</a> is a small library, that provides interop between Slick and ZIO.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-16"></a><a href="#installation-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"io.scalac"</span> %% <span class="hljs-string">"zio-slick-interop"</span> % <span class="hljs-string">"0.4.0"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-16"></a><a href="#example-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>To run this example we should also add the <em>HikariCP integration for Slick</em> in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.typesafe.slick"</span> %% <span class="hljs-string">"slick-hikaricp"</span> % <span class="hljs-string">"3.3.3"</span>
</code></pre>
<p>Here is a full working example of creating database-agnostic Slick repository:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> com.typesafe.config.<span class="hljs-type">ConfigFactory</span>
<span class="hljs-keyword">import</span> slick.interop.zio.<span class="hljs-type">DatabaseProvider</span>
<span class="hljs-keyword">import</span> slick.interop.zio.syntax._
<span class="hljs-keyword">import</span> slick.jdbc.<span class="hljs-type">H2Profile</span>.api._
<span class="hljs-keyword">import</span> slick.jdbc.<span class="hljs-type">JdbcProfile</span>
<span class="hljs-keyword">import</span> zio.console.<span class="hljs-type">Console</span>
<span class="hljs-keyword">import</span> zio.interop.console.cats.putStrLn
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">Has</span>, <span class="hljs-type">IO</span>, <span class="hljs-type">URIO</span>, <span class="hljs-type">ZIO</span>, <span class="hljs-type">ZLayer</span>}

<span class="hljs-keyword">import</span> scala.jdk.<span class="hljs-type">CollectionConverters</span>._

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Item</span>(<span class="hljs-params">id: <span class="hljs-type">Long</span>, name: <span class="hljs-type">String</span></span>)</span>

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ItemRepository</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span></span>(name: <span class="hljs-type">String</span>): <span class="hljs-type">IO</span>[<span class="hljs-type">Throwable</span>, <span class="hljs-type">Long</span>]

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getById</span></span>(id: <span class="hljs-type">Long</span>): <span class="hljs-type">IO</span>[<span class="hljs-type">Throwable</span>, <span class="hljs-type">Option</span>[<span class="hljs-type">Item</span>]]

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">upsert</span></span>(name: <span class="hljs-type">String</span>): <span class="hljs-type">IO</span>[<span class="hljs-type">Throwable</span>, <span class="hljs-type">Long</span>]
}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ItemsTable</span> </span>{
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Items</span>(<span class="hljs-params">tag: <span class="hljs-type">Tag</span></span>) <span class="hljs-keyword">extends</span> <span class="hljs-title">Table</span>[<span class="hljs-type">Item</span>](<span class="hljs-params">
    _tableTag = tag,
    _tableName = "<span class="hljs-type">ITEMS</span>"
  </span>) </span>{
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">id</span> </span>= column[<span class="hljs-type">Long</span>](<span class="hljs-string">"ID"</span>, <span class="hljs-type">O</span>.<span class="hljs-type">PrimaryKey</span>, <span class="hljs-type">O</span>.<span class="hljs-type">AutoInc</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">name</span> </span>= column[<span class="hljs-type">String</span>](<span class="hljs-string">"NAME"</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">*</span> </span>= (id, name) &lt;&gt; ((<span class="hljs-type">Item</span>.apply _).tupled, <span class="hljs-type">Item</span>.unapply _)
  }

  <span class="hljs-keyword">val</span> table = <span class="hljs-type">TableQuery</span>[<span class="hljs-type">ItemsTable</span>.<span class="hljs-type">Items</span>]
}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">SlickItemRepository</span> </span>{
  <span class="hljs-keyword">val</span> live: <span class="hljs-type">ZLayer</span>[<span class="hljs-type">Has</span>[<span class="hljs-type">DatabaseProvider</span>], <span class="hljs-type">Throwable</span>, <span class="hljs-type">Has</span>[<span class="hljs-type">ItemRepository</span>]] =
    <span class="hljs-type">ZLayer</span>.fromServiceM { db =&gt;
      db.profile.flatMap { profile =&gt;
        <span class="hljs-keyword">import</span> profile.api._

        <span class="hljs-keyword">val</span> initialize = <span class="hljs-type">ZIO</span>.fromDBIO(<span class="hljs-type">ItemsTable</span>.table.schema.createIfNotExists)

        <span class="hljs-keyword">val</span> repository = <span class="hljs-keyword">new</span> <span class="hljs-type">ItemRepository</span> {
          <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items = <span class="hljs-type">ItemsTable</span>.table

          <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span></span>(name: <span class="hljs-type">String</span>): <span class="hljs-type">IO</span>[<span class="hljs-type">Throwable</span>, <span class="hljs-type">Long</span>] =
            <span class="hljs-type">ZIO</span>
              .fromDBIO((items returning items.map(_.id)) += <span class="hljs-type">Item</span>(<span class="hljs-number">0</span>L, name))
              .provide(<span class="hljs-type">Has</span>(db))

          <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getById</span></span>(id: <span class="hljs-type">Long</span>): <span class="hljs-type">IO</span>[<span class="hljs-type">Throwable</span>, <span class="hljs-type">Option</span>[<span class="hljs-type">Item</span>]] = {
            <span class="hljs-keyword">val</span> query = items.filter(_.id === id).result

            <span class="hljs-type">ZIO</span>.fromDBIO(query).map(_.headOption).provide(<span class="hljs-type">Has</span>(db))
          }

          <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">upsert</span></span>(name: <span class="hljs-type">String</span>): <span class="hljs-type">IO</span>[<span class="hljs-type">Throwable</span>, <span class="hljs-type">Long</span>] =
            <span class="hljs-type">ZIO</span>
              .fromDBIO { <span class="hljs-keyword">implicit</span> ec =&gt;
                (<span class="hljs-keyword">for</span> {
                  itemOpt &lt;- items.filter(_.name === name).result.headOption
                  id &lt;- itemOpt.fold[<span class="hljs-type">DBIOAction</span>[<span class="hljs-type">Long</span>, <span class="hljs-type">NoStream</span>, <span class="hljs-type">Effect</span>.<span class="hljs-type">Write</span>]](
                    (items returning items.map(_.id)) += <span class="hljs-type">Item</span>(<span class="hljs-number">0</span>L, name)
                  )(item =&gt; (items.map(_.name) update name).map(_ =&gt; item.id))
                } <span class="hljs-keyword">yield</span> id).transactionally
              }
              .provide(<span class="hljs-type">Has</span>(db))
        }

        initialize.as(repository).provide(<span class="hljs-type">Has</span>(db))
      }
    }
}


<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> config = <span class="hljs-type">ConfigFactory</span>.parseMap(
    <span class="hljs-type">Map</span>(
      <span class="hljs-string">"url"</span> -&gt; <span class="hljs-string">"jdbc:h2:mem:test1;DB_CLOSE_DELAY=-1"</span>,
      <span class="hljs-string">"driver"</span> -&gt; <span class="hljs-string">"org.h2.Driver"</span>,
      <span class="hljs-string">"connectionPool"</span> -&gt; <span class="hljs-string">"disabled"</span>
    ).asJava
  )

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> env: <span class="hljs-type">ZLayer</span>[<span class="hljs-type">Any</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">Has</span>[<span class="hljs-type">ItemRepository</span>]] =
    (<span class="hljs-type">ZLayer</span>.succeed(config) ++ <span class="hljs-type">ZLayer</span>.succeed[<span class="hljs-type">JdbcProfile</span>](
      slick.jdbc.<span class="hljs-type">H2Profile</span>
    )) &gt;&gt;&gt; <span class="hljs-type">DatabaseProvider</span>.live &gt;&gt;&gt; <span class="hljs-type">SlickItemRepository</span>.live

  <span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Has</span>[<span class="hljs-type">ItemRepository</span>], <span class="hljs-type">Throwable</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-keyword">for</span> {
      repo &lt;- <span class="hljs-type">ZIO</span>.service[<span class="hljs-type">ItemRepository</span>]
      aId1 &lt;- repo.add(<span class="hljs-string">"A"</span>)
      _ &lt;- repo.add(<span class="hljs-string">"B"</span>)
      a &lt;- repo.getById(<span class="hljs-number">1</span>L)
      b &lt;- repo.getById(<span class="hljs-number">2</span>L)
      aId2 &lt;- repo.upsert(<span class="hljs-string">"A"</span>)
      _ &lt;- putStrLn(<span class="hljs-string">s"<span class="hljs-subst">$aId1</span> == <span class="hljs-subst">$aId2</span>"</span>)
      _ &lt;- putStrLn(<span class="hljs-string">s"A item: <span class="hljs-subst">$a</span>"</span>)
      _ &lt;- putStrLn(<span class="hljs-string">s"B item: <span class="hljs-subst">$b</span>"</span>)
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp.provideCustomLayer(env).exitCode
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zio-test-akka-http"></a><a href="#zio-test-akka-http" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZIO Test Akka HTTP</h2>
<p><a href="https://github.com/senia-psm/zio-test-akka-http">ZIO Test Akka HTTP</a> is an Akka-HTTP Route TestKit for zio-test.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-17"></a><a href="#installation-17" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"info.senia"</span> %% <span class="hljs-string">"zio-test-akka-http"</span> % <span class="hljs-string">"1.0.2"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-17"></a><a href="#example-17" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>An example of writing Akka HTTP Route test spec:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> akka.http.scaladsl.model.<span class="hljs-type">HttpResponse</span>
<span class="hljs-keyword">import</span> akka.http.scaladsl.server.<span class="hljs-type">Directives</span>.complete
<span class="hljs-keyword">import</span> zio.test.<span class="hljs-type">Assertion</span>._
<span class="hljs-keyword">import</span> zio.test._
<span class="hljs-keyword">import</span> zio.test.akkahttp.<span class="hljs-type">DefaultAkkaRunnableSpec</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">MySpec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DefaultAkkaRunnableSpec</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">spec</span> </span>=
    suite(<span class="hljs-string">"MySpec"</span>)(
      testM(<span class="hljs-string">"my test"</span>) {
        assertM(<span class="hljs-type">Get</span>() ~&gt; complete(<span class="hljs-type">HttpResponse</span>()))(
          handled(
            response(equalTo(<span class="hljs-type">HttpResponse</span>()))
          )
        )
      }
    )
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="zparkio"></a><a href="#zparkio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZparkIO</h2>
<p><a href="https://github.com/leobenkel/ZparkIO">ZParkIO</a> is a boilerplate framework to use <em>Spark</em> and <em>ZIO</em> together.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-16"></a><a href="#introduction-16" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p><em>ZparkIO</em> enables us to:</p>
<ul>
<li>Wrap asynchronous and synchronous operations smoothly. So everything is wrapped in ZIO.</li>
<li>Have ZIO features in our spark jobs, like forking and joining fibers, parallelizing tasks, retrying, and timing-out.</li>
<li>Make our spark job much easier to debug</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-18"></a><a href="#installation-18" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"com.leobenkel"</span> %% <span class="hljs-string">"zparkio"</span> % <span class="hljs-string">"[SPARK_VERSION]_[VERSION]"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-18"></a><a href="#example-18" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>Using <em>ZparkIO</em> we can write jobs like the following example:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> com.leobenkel.zparkio.<span class="hljs-type">Services</span>.<span class="hljs-type">SparkModule</span>
<span class="hljs-keyword">import</span> com.leobenkel.zparkio.<span class="hljs-type">Services</span>.<span class="hljs-type">SparkModule</span>.<span class="hljs-type">SparkModule</span>
<span class="hljs-keyword">import</span> com.leobenkel.zparkio.<span class="hljs-type">ZparkioApplicationTimeoutException</span>
<span class="hljs-keyword">import</span> org.apache.spark.sql.<span class="hljs-type">DataFrame</span>
<span class="hljs-keyword">import</span> zio.clock.<span class="hljs-type">Clock</span>
<span class="hljs-keyword">import</span> zio.duration.durationInt
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">Schedule</span>, <span class="hljs-type">Task</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">readParquetFile</span></span>[<span class="hljs-type">A</span>](parquetPath: <span class="hljs-type">String</span>): <span class="hljs-type">ZIO</span>[<span class="hljs-type">Clock</span> <span class="hljs-keyword">with</span> <span class="hljs-type">SparkModule</span>, <span class="hljs-type">Throwable</span>, <span class="hljs-type">DataFrame</span>] =
  <span class="hljs-keyword">for</span> {
    spark &lt;- <span class="hljs-type">SparkModule</span>()
    dataset &lt;- <span class="hljs-type">Task</span>(spark.read.parquet(parquetPath))
      .retry(
        <span class="hljs-type">Schedule</span>.recurs(<span class="hljs-number">3</span>) &amp;&amp; <span class="hljs-type">Schedule</span>.exponential(<span class="hljs-number">2.</span>seconds)
      )
      .timeoutFail(<span class="hljs-type">ZparkioApplicationTimeoutException</span>())(<span class="hljs-number">5.</span>minutes)
  } <span class="hljs-keyword">yield</span> dataset
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="quill"></a><a href="#quill" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quill</h2>
<p><a href="https://github.com/getquill/quill">Quil</a> is a Compile-time Language Integrated Queries for Scala.</p>
<h3><a class="anchor" aria-hidden="true" id="introduction-17"></a><a href="#introduction-17" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Quill allows us to create SQL out of a Scala code during the <strong>compile-time</strong>. It provides the <em>Quoted Domain Specific Language (QDSL)</em> to express queries in Scala and execute them in a target language.</p>
<ul>
<li><strong>Boilerplate-free mapping</strong> — The database schema is mapped using simple case classes.</li>
<li><strong>Quoted DSL</strong> — Queries are defined inside a quote block. Quill parses each quoted block of code (quotation) at compile-time and translates them to an internal Abstract Syntax Tree (AST)</li>
<li><strong>Compile-time query generation</strong> — The <code>ctx.run</code> call reads the quotation’s AST and translates it to the target language at compile-time, emitting the query string as a compilation message. As the query string is known at compile-time, the runtime overhead is very low and similar to using the database driver directly.</li>
<li><strong>Compile-time query validation</strong> — If configured, the query is verified against the database at compile-time and the compilation fails if it is not valid. The query validation does not alter the database state.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="installation-19"></a><a href="#installation-19" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h3>
<p>In order to use this library with ZIO, we need to add the following lines in our <code>build.sbt</code> file:</p>
<pre><code class="hljs css language-scala"><span class="hljs-comment">// Provides Quill contexts for ZIO.</span>
libraryDependencies += <span class="hljs-string">"io.getquill"</span> %% <span class="hljs-string">"quill-zio"</span> % <span class="hljs-string">"3.9.0"</span>

<span class="hljs-comment">// Provides Quill context that execute MySQL, PostgreSQL, SQLite, H2, SQL Server and Oracle queries inside of ZIO.</span>
libraryDependencies += <span class="hljs-string">"io.getquill"</span> %% <span class="hljs-string">"quill-jdbc-zio"</span> % <span class="hljs-string">"3.9.0"</span> 

<span class="hljs-comment">// Provides Quill context that executes Cassandra queries inside of ZIO.</span>
libraryDependencies += <span class="hljs-string">"io.getquill"</span> %% <span class="hljs-string">"quill-cassandra-zio"</span> % <span class="hljs-string">"3.9.0"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="example-19"></a><a href="#example-19" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>First, to run this example, we should create the <code>Person</code> table at the database initialization. Let's put the following lines into the <code>h2-schema.sql</code> file at the<code>src/main/resources</code> path:</p>
<pre><code class="hljs css language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> Person(
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">255</span>),
    age <span class="hljs-built_in">int</span>
);
</code></pre>
<p>In this example, we use in-memory database as our data source. So we just put these lines into the <code>application.conf</code> at the <code>src/main/resources</code> path:</p>
<pre><code class="hljs css language-hocon">myH2DB {
  dataSourceClassName = org.h2.jdbcx.JdbcDataSource
  dataSource {
    url = <span class="hljs-string">"jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM 'classpath:h2-schema.sql'"</span>
   <span class="hljs-built_in"> user </span>= sa
  }
}
</code></pre>
<p>Now we are ready to run the example below:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> io.getquill._
<span class="hljs-keyword">import</span> io.getquill.context.<span class="hljs-type">ZioJdbc</span>._
<span class="hljs-keyword">import</span> zio.console.{<span class="hljs-type">Console</span>, putStrLn}
<span class="hljs-keyword">import</span> zio.{<span class="hljs-type">ExitCode</span>, <span class="hljs-type">Has</span>, <span class="hljs-type">URIO</span>, <span class="hljs-type">ZIO</span>}

<span class="hljs-keyword">import</span> java.io.<span class="hljs-type">Closeable</span>
<span class="hljs-keyword">import</span> javax.sql

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">QuillZIOExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> ctx = <span class="hljs-keyword">new</span> <span class="hljs-type">H2ZioJdbcContext</span>(<span class="hljs-type">Literal</span>)

  <span class="hljs-keyword">import</span> ctx._

  <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>(<span class="hljs-params">name: <span class="hljs-type">String</span>, age: <span class="hljs-type">Int</span></span>)</span>

  <span class="hljs-keyword">val</span> myApp: <span class="hljs-type">ZIO</span>[<span class="hljs-type">Console</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Has</span>[sql.<span class="hljs-type">DataSource</span> <span class="hljs-keyword">with</span> <span class="hljs-type">Closeable</span>], <span class="hljs-type">Exception</span>, <span class="hljs-type">Unit</span>] =
    <span class="hljs-keyword">for</span> {
      _ &lt;- ctx.run(
        quote {
          liftQuery(<span class="hljs-type">List</span>(<span class="hljs-type">Person</span>(<span class="hljs-string">"Alex"</span>, <span class="hljs-number">25</span>), <span class="hljs-type">Person</span>(<span class="hljs-string">"Sarah"</span>, <span class="hljs-number">23</span>)))
            .foreach(r =&gt;
              query[<span class="hljs-type">Person</span>].insert(r)
            )
        }
      ).onDS
      result &lt;- ctx.run(
        quote(query[<span class="hljs-type">Person</span>].filter(p =&gt; p.name == <span class="hljs-string">"Sarah"</span>))
      ).onDS
      _ &lt;- putStrLn(result.toString)
    } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">URIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">ExitCode</span>] =
    myApp
      .provideCustomLayer(<span class="hljs-type">DataSourceLayer</span>.fromPrefix(<span class="hljs-string">"myH2DB"</span>))
      .exitCode
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/resources/ecosystem/officials"><span class="arrow-prev">← </span><span>Official ZIO Libraries</span></a><a class="docs-next button" href="/docs/resources/ecosystem/compatible"><span>ZIO Compatible Libraries</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#caliban">Caliban</a><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#installation">Installation</a></li><li><a href="#example">Example</a></li></ul></li><li><a href="#zio-grpc">ZIO gRPC</a><ul class="toc-headings"><li><a href="#introduction-1">Introduction</a></li><li><a href="#installation-1">Installation</a></li><li><a href="#example-1">Example</a></li></ul></li><li><a href="#distage">Distage</a><ul class="toc-headings"><li><a href="#introduction-2">Introduction</a></li><li><a href="#installation-2">Installation</a></li><li><a href="#example-2">Example</a></li></ul></li><li><a href="#logstage">LogStage</a><ul class="toc-headings"><li><a href="#introduction-3">Introduction</a></li><li><a href="#installation-3">Installation</a></li><li><a href="#example-3">Example</a></li></ul></li><li><a href="#munit-zio">MUnit ZIO</a><ul class="toc-headings"><li><a href="#introduction-4">Introduction</a></li><li><a href="#installation-4">Installation</a></li><li><a href="#example-4">Example</a></li></ul></li><li><a href="#rezilience">Rezilience</a><ul class="toc-headings"><li><a href="#introduction-5">Introduction</a></li><li><a href="#installation-5">Installation</a></li><li><a href="#example-5">Example</a></li></ul></li><li><a href="#tranzactio">TranzactIO</a><ul class="toc-headings"><li><a href="#introduction-6">Introduction</a></li><li><a href="#installation-6">Installation</a></li><li><a href="#example-6">Example</a></li></ul></li><li><a href="#zio-arrow">ZIO Arrow</a><ul class="toc-headings"><li><a href="#introduction-7">Introduction</a></li><li><a href="#installation-7">Installation</a></li><li><a href="#example-7">Example</a></li></ul></li><li><a href="#zio-amqp">ZIO AMQP</a><ul class="toc-headings"><li><a href="#introduction-8">Introduction</a></li><li><a href="#installation-8">Installation</a></li><li><a href="#example-8">Example</a></li></ul></li><li><a href="#zio-aws">ZIO AWS</a><ul class="toc-headings"><li><a href="#introduction-9">Introduction</a></li><li><a href="#installation-9">Installation</a></li><li><a href="#example-9">Example</a></li></ul></li><li><a href="#zio-aws-s3">ZIO AWS S3</a><ul class="toc-headings"><li><a href="#introduction-10">Introduction</a></li><li><a href="#installation-10">Installation</a></li><li><a href="#example-10">Example</a></li></ul></li><li><a href="#zio-http">ZIO HTTP</a><ul class="toc-headings"><li><a href="#introduction-11">Introduction</a></li><li><a href="#installation-11">Installation</a></li><li><a href="#example-11">Example</a></li></ul></li><li><a href="#zio-k8s">ZIO K8s</a><ul class="toc-headings"><li><a href="#introduction-12">Introduction</a></li><li><a href="#installation-12">Installation</a></li><li><a href="#example-12">Example</a></li></ul></li><li><a href="#zio-kinesis">ZIO Kinesis</a><ul class="toc-headings"><li><a href="#introduction-13">Introduction</a></li><li><a href="#installation-13">Installation</a></li><li><a href="#example-13">Example</a></li></ul></li><li><a href="#zio-pulsar">ZIO Pulsar</a><ul class="toc-headings"><li><a href="#introduction-14">Introduction</a></li><li><a href="#installation-14">Installation</a></li><li><a href="#example-14">Example</a></li></ul></li><li><a href="#zio-saga">ZIO Saga</a><ul class="toc-headings"><li><a href="#introduction-15">Introduction</a></li><li><a href="#installation-15">Installation</a></li><li><a href="#example-15">Example</a></li></ul></li><li><a href="#zio-slick-interop">ZIO Slick Interop</a><ul class="toc-headings"><li><a href="#installation-16">Installation</a></li><li><a href="#example-16">Example</a></li></ul></li><li><a href="#zio-test-akka-http">ZIO Test Akka HTTP</a><ul class="toc-headings"><li><a href="#installation-17">Installation</a></li><li><a href="#example-17">Example</a></li></ul></li><li><a href="#zparkio">ZparkIO</a><ul class="toc-headings"><li><a href="#introduction-16">Introduction</a></li><li><a href="#installation-18">Installation</a></li><li><a href="#example-18">Example</a></li></ul></li><li><a href="#quill">Quill</a><ul class="toc-headings"><li><a href="#introduction-17">Introduction</a></li><li><a href="#installation-19">Installation</a></li><li><a href="#example-19">Example</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/navbar_brand.png" alt="ZIO"/></a><div><h5>GitHub</h5><a href="https://github.com/zio/zio"><img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github"/></a></div><div><h5>Chat with us on Discord</h5><a href="https://discord.gg/2ccFBr4"><img src="https://img.shields.io/discord/629491597070827530?logo=discord&amp;style=social" alt="discord"/></a></div><div><h5>Follow us on Twitter</h5><a href="https://twitter.com/zioscala"><img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&amp;style=social" alt="twitter"/></a></div><div><h5>Additional resources</h5><a href="/api/zio/">Scaladoc of zio</a></div><div><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify"/></a></div></section><section class="copyright">Copyright © 2021 ZIO Maintainers</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0c94b59071da7001757d08ab43d9e033',
                indexName: 'zio',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>